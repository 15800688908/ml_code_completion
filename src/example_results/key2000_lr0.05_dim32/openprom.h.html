<!DOCTYPE html>
<html>
<head>
<style>
span.c {
    background-color: #CCFFCC;
}
span.pc {
    background-color: #FFEEBB;
}
span.w {
    background-color: #FFCCCC;
}
</style>
</head>
<body>
<pre>
<span class="w">#ifndef</span> <span class="w">__SPARC_OPENPROM_H</span>
<span class="w">#define</span> <span class="w">__SPARC_OPENPROM_H</span>




<span class="w">#define</span> <span class="w">LINUX_OPPROM_MAGIC</span>      <span class="w">0x10010407</span>

<span class="w">#ifndef</span> <span class="w">__ASSEMBLY__</span>
<span class="w">#include</span> <span class="w">&lt;linux/of.h&gt;</span>


<span class="w">struct</span> <span class="w">linux_dev_v0_funcs</span> <span class="w">{</span>
	<span class="w">int</span> <span class="w">(*v0_devopen)(char</span> <span class="w">*device_str);</span>
	<span class="w">int</span> <span class="w">(*v0_devclose)(int</span> <span class="w">dev_desc);</span>
	<span class="pc">i</span><span class="c">nt</span> <span class="c">(*</span><span class="w">v0_rdblkdev</span><span class="c">)(</span><span class="pc">i</span><span class="c">nt</span> <span class="w">d</span><span class="pc">ev_</span><span class="c">desc,</span> <span class="c">int</span> <span class="w">num_blks</span><span class="pc">,</span> <span class="pc">i</span><span class="c">nt</span> <span class="w">blk_st</span><span class="pc">,</span> <span class="w">c</span><span class="pc">h</span><span class="c">ar</span> <span class="c">*buf</span><span class="pc">)</span><span class="c">;</span>
	<span class="pc">i</span><span class="c">nt</span> <span class="c">(*</span><span class="w">v0_wrblkdev</span><span class="c">)(</span><span class="pc">i</span><span class="c">nt</span> <span class="w">d</span><span class="pc">ev_</span><span class="c">desc,</span> <span class="c">int</span> <span class="pc">n</span><span class="c">um_blks,</span> <span class="c">int</span> <span class="pc">b</span><span class="c">lk_st,</span> <span class="w">c</span><span class="pc">h</span><span class="c">ar</span> <span class="c">*buf</span><span class="pc">)</span><span class="c">;</span>
	<span class="c">int</span> <span class="c">(*</span><span class="w">v0_wrnetdev</span><span class="c">)(</span><span class="pc">i</span><span class="c">nt</span> <span class="w">d</span><span class="c">ev_desc,</span> <span class="c">int</span> <span class="w">num_bytes</span><span class="c">,</span> <span class="w">c</span><span class="c">har</span> <span class="c">*buf</span><span class="pc">)</span><span class="c">;</span>
	<span class="c">int</span> <span class="c">(*</span><span class="w">v0_rdnetdev</span><span class="c">)(</span><span class="pc">i</span><span class="c">nt</span> <span class="pc">d</span><span class="c">ev_desc,</span> <span class="c">int</span> <span class="pc">n</span><span class="c">um_bytes</span><span class="pc">,</span> <span class="pc">c</span><span class="c">har</span> <span class="c">*buf</span><span class="pc">)</span><span class="c">;</span>
	<span class="c">int</span> <span class="c">(*</span><span class="w">v0_rdchardev</span><span class="c">)(</span><span class="pc">i</span><span class="c">nt</span> <span class="pc">d</span><span class="c">ev_desc,</span> <span class="c">int</span> <span class="c">num_bytes</span><span class="pc">,</span> <span class="c">int</span> <span class="w">du</span><span class="c">mmy</span><span class="pc">,</span> <span class="w">c</span><span class="pc">h</span><span class="c">ar</span> <span class="c">*buf</span><span class="pc">)</span><span class="c">;</span>
	<span class="c">int</span> <span class="c">(*</span><span class="w">v0_wrchardev</span><span class="c">)(</span><span class="pc">i</span><span class="c">nt</span> <span class="pc">d</span><span class="c">ev_desc,</span> <span class="c">int</span> <span class="w">n</span><span class="c">um_bytes</span><span class="pc">,</span> <span class="c">int</span> <span class="w">du</span><span class="c">mmy</span><span class="pc">,</span> <span class="w">c</span><span class="pc">h</span><span class="c">ar</span> <span class="c">*buf</span><span class="pc">)</span><span class="c">;</span>
	<span class="c">int</span> <span class="c">(*</span><span class="w">v0_seekdev</span><span class="c">)(</span><span class="pc">i</span><span class="c">nt</span> <span class="w">d</span><span class="c">ev_desc,</span> <span class="w">l</span><span class="c">ong</span> <span class="w">logical_offst</span><span class="c">,</span> <span class="c">int</span> <span class="w">fr</span><span class="pc">o</span><span class="c">m</span><span class="pc">)</span><span class="c">;</span>
<span class="w">}</span><span class="c">;</span>


<span class="pc">str</span><span class="c">uct</span> <span class="w">linux_dev_v2_funcs</span> <span class="c">{</span>
	<span class="w">phandle</span> <span class="w">(</span><span class="pc">*</span><span class="w">v2_inst2pkg</span><span class="c">)(</span><span class="pc">i</span><span class="c">nt</span> <span class="w">d</span><span class="pc">)</span><span class="c">;</span>	
	<span class="w">c</span><span class="pc">h</span><span class="c">ar</span> <span class="w">* (*v2_dumb_mem_alloc)</span><span class="c">(</span><span class="pc">c</span><span class="c">har</span> <span class="c">*</span><span class="w">va</span><span class="c">,</span> <span class="w">u</span><span class="c">nsigned</span> <span class="w">sz</span><span class="c">);</span>
	<span class="pc">v</span><span class="c">oid</span> <span class="c">(*</span><span class="w">v2_dumb_mem_free</span><span class="c">)(</span><span class="pc">c</span><span class="c">har</span> <span class="c">*</span><span class="w">va</span><span class="c">,</span> <span class="pc">u</span><span class="c">nsigned</span> <span class="w">sz</span><span class="pc">)</span><span class="c">;</span>

	
	<span class="w">c</span><span class="c">har</span> <span class="w">*</span><span class="pc"> </span><span class="c">(*</span><span class="w">v2_dumb_mmap)</span><span class="pc">(</span><span class="c">char</span> <span class="c">*</span><span class="w">virta</span><span class="pc">,</span> <span class="pc">i</span><span class="c">nt</span> <span class="w">which_io</span><span class="pc">,</span> <span class="pc">u</span><span class="c">nsigned</span> <span class="w">pa</span><span class="pc">d</span><span class="c">dr</span><span class="pc">,</span> <span class="c">unsigned</span> <span class="w">sz</span><span class="pc">)</span><span class="c">;</span>
	<span class="pc">v</span><span class="c">oid</span> <span class="c">(*</span><span class="w">v2_dumb_munmap</span><span class="c">)(</span><span class="pc">ch</span><span class="c">ar</span> <span class="c">*</span><span class="w">vi</span><span class="pc">r</span><span class="c">ta,</span> <span class="c">unsigned</span> <span class="w">s</span><span class="pc">i</span><span class="c">ze</span><span class="pc">)</span><span class="c">;</span>

	<span class="c">int</span> <span class="c">(*</span><span class="w">v2_dev_open</span><span class="c">)(</span><span class="pc">c</span><span class="c">har</span> <span class="c">*</span><span class="w">devpath</span><span class="pc">)</span><span class="c">;</span>
	<span class="c">void</span> <span class="c">(*</span><span class="w">v2_dev_close</span><span class="c">)(</span><span class="w">i</span><span class="c">nt</span> <span class="w">d</span><span class="pc">)</span><span class="c">;</span>
	<span class="pc">i</span><span class="c">nt</span> <span class="c">(*</span><span class="w">v2_dev_read</span><span class="c">)(</span><span class="pc">i</span><span class="c">nt</span> <span class="w">d</span><span class="c">,</span> <span class="pc">c</span><span class="c">har</span> <span class="c">*buf,</span> <span class="pc">i</span><span class="c">nt</span> <span class="w">n</span><span class="pc">b</span><span class="c">ytes);</span>
	<span class="c">int</span> <span class="c">(*</span><span class="w">v2_dev_write</span><span class="c">)(</span><span class="pc">i</span><span class="c">nt</span> <span class="w">d</span><span class="c">,</span> <span class="w">c</span><span class="pc">o</span><span class="c">nst</span> <span class="pc">c</span><span class="c">har</span> <span class="c">*buf,</span> <span class="pc">i</span><span class="c">nt</span> <span class="w">n</span><span class="pc">b</span><span class="c">ytes</span><span class="pc">)</span><span class="c">;</span>
	<span class="c">int</span> <span class="c">(*</span><span class="w">v2_dev_seek</span><span class="c">)(</span><span class="pc">i</span><span class="c">nt</span> <span class="w">d</span><span class="c">,</span> <span class="c">int</span> <span class="w">hi</span><span class="c">,</span> <span class="c">int</span> <span class="w">lo</span><span class="pc">)</span><span class="c">;</span>

	
	<span class="pc">v</span><span class="c">oid</span> <span class="c">(*</span><span class="w">v2_wheee2</span><span class="c">)(</span><span class="pc">v</span><span class="c">oid</span><span class="pc">)</span><span class="c">;</span>
	<span class="pc">v</span><span class="c">oid</span> <span class="c">(*</span><span class="w">v2_wheee3</span><span class="c">)(void);</span>
<span class="pc">}</span><span class="c">;</span>

<span class="w">s</span><span class="pc">tr</span><span class="c">uct</span> <span class="w">linux_mlist_v0</span> <span class="c">{</span>
	<span class="pc">s</span><span class="c">truct</span> <span class="w">l</span><span class="pc">in</span><span class="c">ux_mlist_v0</span> <span class="c">*</span><span class="w">theres_more</span><span class="c">;</span>
	<span class="pc">un</span><span class="c">signed</span> <span class="c">int</span> <span class="w">start_adr</span><span class="c">;</span>
	<span class="pc">u</span><span class="c">nsigned</span> <span class="w">num_bytes</span><span class="c">;</span>
<span class="pc">}</span><span class="c">;</span>

<span class="c">struct</span> <span class="w">linux_mem_v0</span> <span class="c">{</span>
	<span class="pc">s</span><span class="c">truct</span> <span class="pc">lin</span><span class="c">ux_mlist_v0</span> <span class="w">*</span><span class="pc">*</span><span class="w">v0_totphys</span><span class="c">;</span>
	<span class="c">struct</span> <span class="w">l</span><span class="pc">in</span><span class="c">ux_mlist_v0</span> <span class="pc">**</span><span class="w">v0_prommap</span><span class="c">;</span>
	<span class="pc">s</span><span class="c">truct</span> <span class="pc">l</span><span class="c">inux_mlist_v0</span> <span class="pc">**</span><span class="w">v0_available</span><span class="c">;</span> 
<span class="pc">}</span><span class="c">;</span>


<span class="pc">s</span><span class="c">truct</span> <span class="w">linux_arguments_v0</span> <span class="c">{</span>
	<span class="w">c</span><span class="pc">h</span><span class="c">ar</span> <span class="c">*</span><span class="w">ar</span><span class="pc">gv[</span><span class="w">8</span><span class="c">];</span>
	<span class="pc">c</span><span class="c">har</span> <span class="w">a</span><span class="pc">r</span><span class="c">gs[</span><span class="w">10</span><span class="pc">0</span><span class="c">];</span>
	<span class="pc">c</span><span class="c">har</span> <span class="w">boot_dev</span><span class="c">[</span><span class="w">2</span><span class="c">];</span>
	<span class="pc">i</span><span class="c">nt</span> <span class="w">boot_dev_ctrl</span><span class="c">;</span>
	<span class="pc">i</span><span class="c">nt</span> <span class="w">boot_dev_unit</span><span class="c">;</span>
	<span class="c">int</span> <span class="w">dev_partition</span><span class="c">;</span>
	<span class="pc">c</span><span class="c">har</span> <span class="c">*</span><span class="w">kernel_file_name</span><span class="c">;</span>
	<span class="w">v</span><span class="c">oid</span> <span class="c">*</span><span class="w">aieee1</span><span class="c">;</span>           
<span class="pc">}</span><span class="c">;</span>


<span class="pc">s</span><span class="c">truct</span> <span class="w">linux_bootargs_v2</span> <span class="c">{</span>
	<span class="pc">c</span><span class="c">har</span> <span class="w">*</span><span class="pc">*</span><span class="w">bootpath</span><span class="c">;</span>
	<span class="pc">c</span><span class="c">har</span> <span class="pc">**</span><span class="w">bootargs</span><span class="c">;</span>
	<span class="pc">i</span><span class="c">nt</span> <span class="pc">*</span><span class="w">fd_stdin</span><span class="c">;</span>
	<span class="c">int</span> <span class="c">*</span><span class="w">fd_stdout</span><span class="c">;</span>
<span class="w">}</span><span class="c">;</span>


<span class="c">struct</span> <span class="w">linux_romvec</span> <span class="c">{</span>
	
	<span class="pc">u</span><span class="c">nsigned</span> <span class="pc">i</span><span class="c">nt</span> <span class="w">pv_magic_cookie</span><span class="c">;</span>
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">pv_romvers</span><span class="c">;</span>
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">pv_plugin_revision</span><span class="c">;</span>
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">pv_printrev</span><span class="c">;</span>

	
	<span class="pc">s</span><span class="c">truct</span> <span class="w">linux_mem_v0</span> <span class="w">pv_v0mem</span><span class="c">;</span>

	
	<span class="pc">s</span><span class="c">truct</span> <span class="w">linux_nodeops</span> <span class="c">*</span><span class="w">pv_nodeops</span><span class="c">;</span>

	<span class="w">c</span><span class="pc">h</span><span class="c">ar</span> <span class="pc">**</span><span class="w">pv_bootstr</span><span class="c">;</span>
	<span class="pc">s</span><span class="c">truct</span> <span class="w">linux_dev_v0_funcs</span> <span class="w">pv_v0devops</span><span class="c">;</span>

	<span class="w">c</span><span class="c">har</span> <span class="c">*</span><span class="w">pv_stdin</span><span class="c">;</span>
	<span class="pc">c</span><span class="c">har</span> <span class="c">*</span><span class="w">pv_stdout</span><span class="c">;</span>
<span class="w">#</span><span class="c">define</span>	<span class="w">PROMDEV_KBD</span>	<span class="pc">0</span>		
<span class="c">#define</span>	<span class="w">PROMDEV_SCREEN</span>	<span class="pc">0</span>		
<span class="c">#define</span>	<span class="w">PROMDEV_TTYA</span>	<span class="c">1</span>		
<span class="c">#define</span>	<span class="w">PROMDEV_TTYB</span>	<span class="c">2</span>		

	
	<span class="w">i</span><span class="c">nt</span> <span class="w">(</span><span class="c">*</span><span class="w">pv_getchar</span><span class="c">)(</span><span class="pc">v</span><span class="c">oid</span><span class="pc">);</span>
	<span class="pc">v</span><span class="c">oid</span> <span class="c">(*</span><span class="w">pv_putchar</span><span class="c">)(</span><span class="pc">i</span><span class="c">nt</span> <span class="w">ch</span><span class="pc">)</span><span class="c">;</span>

	
	<span class="pc">i</span><span class="c">nt</span> <span class="c">(*</span><span class="w">pv_nbgetchar</span><span class="c">)(</span><span class="pc">v</span><span class="c">oid);</span>
	<span class="pc">i</span><span class="c">nt</span> <span class="c">(*</span><span class="w">pv_nbputchar</span><span class="c">)(</span><span class="pc">i</span><span class="c">nt</span> <span class="w">ch</span><span class="c">);</span>

	<span class="pc">v</span><span class="c">oid</span> <span class="c">(*</span><span class="w">pv_putstr</span><span class="c">)(</span><span class="w">c</span><span class="pc">h</span><span class="c">ar</span> <span class="c">*</span><span class="w">s</span><span class="pc">t</span><span class="c">r</span><span class="pc">,</span> <span class="c">int</span> <span class="w">l</span><span class="c">en);</span>

	
	<span class="c">void</span> <span class="c">(*</span><span class="w">pv_reboot</span><span class="c">)(</span><span class="pc">c</span><span class="c">har</span> <span class="c">*</span><span class="w">bootstr</span><span class="c">);</span>
	<span class="c">void</span> <span class="c">(*</span><span class="w">pv_printf</span><span class="c">)(</span><span class="w">__const__</span> <span class="w">c</span><span class="c">har</span> <span class="c">*</span><span class="w">f</span><span class="pc">m</span><span class="c">t</span><span class="w">, ...);</span>
	<span class="pc">v</span><span class="c">oid</span> <span class="pc">(</span><span class="c">*</span><span class="w">pv_abort</span><span class="c">)(</span><span class="pc">v</span><span class="c">oid</span><span class="pc">)</span><span class="c">;</span>
	<span class="w">__v</span><span class="pc">o</span><span class="c">latile__</span> <span class="pc">i</span><span class="c">nt</span> <span class="w">*pv_ticks;</span>
	<span class="pc">v</span><span class="c">oid</span> <span class="pc">(</span><span class="c">*</span><span class="w">pv_halt</span><span class="c">)(void</span><span class="pc">)</span><span class="c">;</span>
	<span class="c">void</span> <span class="w">(**pv_synchook)</span><span class="pc">(</span><span class="c">void);</span>

	
	<span class="w">un</span><span class="pc">i</span><span class="c">on</span> <span class="c">{</span>
		<span class="c">void</span> <span class="c">(*</span><span class="w">v0_eval</span><span class="c">)(</span><span class="w">i</span><span class="c">nt</span> <span class="w">l</span><span class="pc">e</span><span class="c">n</span><span class="pc">,</span> <span class="c">char</span> <span class="c">*</span><span class="w">s</span><span class="pc">tr</span><span class="c">);</span>
		<span class="c">void</span> <span class="c">(*</span><span class="w">v2_eval</span><span class="c">)(</span><span class="pc">c</span><span class="c">har</span> <span class="c">*str</span><span class="pc">)</span><span class="c">;</span>
	<span class="w">}</span> <span class="w">pv_fortheval;</span>

	<span class="pc">s</span><span class="c">truct</span> <span class="w">linux_arguments_v0</span> <span class="pc">**</span><span class="w">pv_v0bootargs</span><span class="c">;</span>

	
	<span class="w">u</span><span class="pc">n</span><span class="c">signed</span> <span class="c">int</span> <span class="c">(*</span><span class="w">pv_enaddr</span><span class="c">)(</span><span class="pc">i</span><span class="c">nt</span> <span class="w">d</span><span class="c">,</span> <span class="w">c</span><span class="pc">h</span><span class="c">ar</span> <span class="c">*</span><span class="w">enaddr</span><span class="pc">)</span><span class="c">;</span>

	<span class="w">s</span><span class="c">truct</span> <span class="w">linux_bootargs_v2</span> <span class="w">pv_v2bootargs</span><span class="c">;</span>
	<span class="c">struct</span> <span class="w">linux_dev_v2_funcs</span> <span class="w">pv_v2devops</span><span class="c">;</span>

	<span class="pc">i</span><span class="c">nt</span> <span class="w">filler</span><span class="pc">[</span><span class="w">15</span><span class="c">];</span>

	
	<span class="w">v</span><span class="c">oid</span> <span class="pc">(</span><span class="c">*</span><span class="w">pv_setctxt</span><span class="c">)(</span><span class="pc">i</span><span class="c">nt</span> <span class="w">ct</span><span class="pc">xt</span><span class="c">,</span> <span class="w">c</span><span class="c">har</span> <span class="c">*</span><span class="w">v</span><span class="pc">a</span><span class="c">,</span> <span class="pc">i</span><span class="c">nt</span> <span class="w">pmeg</span><span class="pc">)</span><span class="c">;</span>

	

	
	<span class="c">int</span> <span class="c">(*</span><span class="w">v3_cpustart</span><span class="c">)(</span><span class="pc">u</span><span class="c">nsigned</span> <span class="c">int</span> <span class="w">whichcpu</span><span class="c">,</span> <span class="pc">i</span><span class="c">nt</span> <span class="w">ctxtbl_ptr</span><span class="c">,</span>
			   <span class="c">int</span> <span class="w">thiscontext</span><span class="pc">,</span> <span class="w">c</span><span class="c">har</span> <span class="c">*</span><span class="w">prog_counter</span><span class="pc">)</span><span class="c">;</span>

	
	<span class="pc">i</span><span class="c">nt</span> <span class="c">(*</span><span class="w">v3_cpustop</span><span class="c">)(</span><span class="pc">u</span><span class="c">nsigned</span> <span class="c">int</span> <span class="w">w</span><span class="c">hichcpu</span><span class="pc">)</span><span class="c">;</span>

	
	<span class="c">int</span> <span class="c">(*</span><span class="w">v3_cpuidle</span><span class="c">)(</span><span class="pc">u</span><span class="c">nsigned</span> <span class="c">int</span> <span class="w">w</span><span class="c">hichcpu</span><span class="pc">)</span><span class="c">;</span>

	
	<span class="c">int</span> <span class="c">(*</span><span class="w">v3_cpuresume</span><span class="c">)(</span><span class="pc">u</span><span class="c">nsigned</span> <span class="c">int</span> <span class="w">w</span><span class="pc">h</span><span class="c">ichcpu);</span>
<span class="pc">}</span><span class="c">;</span>


<span class="pc">s</span><span class="c">truct</span> <span class="w">linux_nodeops</span> <span class="c">{</span>
	<span class="w">phandle</span> <span class="c">(*</span><span class="w">no_nextnode</span><span class="c">)(</span><span class="w">p</span><span class="pc">h</span><span class="c">andle</span> <span class="w">no</span><span class="pc">d</span><span class="c">e</span><span class="w">)</span><span class="c">;</span>
	<span class="w">ph</span><span class="pc">a</span><span class="c">ndle</span> <span class="pc">(*</span><span class="w">no_child</span><span class="c">)(</span><span class="w">p</span><span class="c">handle</span> <span class="w">no</span><span class="pc">d</span><span class="c">e</span><span class="w">)</span><span class="c">;</span>
	<span class="pc">i</span><span class="c">nt</span> <span class="c">(*</span><span class="w">no_proplen</span><span class="c">)(</span><span class="w">p</span><span class="c">handle</span> <span class="w">n</span><span class="pc">od</span><span class="c">e</span><span class="pc">,</span> <span class="w">c</span><span class="pc">o</span><span class="c">nst</span> <span class="c">char</span> <span class="c">*name);</span>
	<span class="pc">i</span><span class="c">nt</span> <span class="c">(*</span><span class="w">no_getprop</span><span class="c">)(</span><span class="pc">p</span><span class="c">handle</span> <span class="w">n</span><span class="pc">od</span><span class="c">e</span><span class="pc">,</span> <span class="w">c</span><span class="pc">o</span><span class="c">nst</span> <span class="c">char</span> <span class="c">*name</span><span class="pc">,</span> <span class="w">c</span><span class="pc">h</span><span class="c">ar</span> <span class="c">*</span><span class="w">v</span><span class="pc">al)</span><span class="c">;</span>
	<span class="pc">i</span><span class="c">nt</span> <span class="c">(*</span><span class="w">no_setprop</span><span class="c">)(</span><span class="w">p</span><span class="c">handle</span> <span class="w">n</span><span class="pc">od</span><span class="c">e</span><span class="pc">,</span> <span class="w">c</span><span class="pc">o</span><span class="c">nst</span> <span class="c">char</span> <span class="c">*name</span><span class="pc">,</span> <span class="w">c</span><span class="pc">h</span><span class="c">ar</span> <span class="c">*</span><span class="w">v</span><span class="pc">al</span><span class="c">,</span> <span class="pc">i</span><span class="c">nt</span> <span class="pc">l</span><span class="c">en);</span>
	<span class="w">c</span><span class="pc">h</span><span class="c">ar</span> <span class="w">* (*no_nextprop)</span><span class="c">(</span><span class="w">p</span><span class="c">handle</span> <span class="w">no</span><span class="pc">d</span><span class="c">e</span><span class="pc">,</span> <span class="c">char</span> <span class="c">*name</span><span class="pc">)</span><span class="c">;</span>
<span class="pc">}</span><span class="c">;</span>


<span class="c">#</span><span class="pc">i</span><span class="c">f</span> <span class="c">defined(</span><span class="w">__sparc__)</span><span class="pc"> &amp;</span><span class="c">&amp;</span> <span class="c">defined(</span><span class="w">__arch64__</span><span class="c">)</span>
<span class="c">#define</span> <span class="w">PROMREG_MAX</span>     <span class="w">2</span><span class="pc">4</span>
<span class="c">#define</span> <span class="w">PROMVADDR_MAX</span>   <span class="w">1</span><span class="pc">6</span>
<span class="c">#define</span> <span class="w">PROMINTR_MAX</span>    <span class="w">3</span><span class="c">2</span>
<span class="c">#</span><span class="pc">el</span><span class="c">se</span>
<span class="c">#define</span> <span class="pc">PROMR</span><span class="c">EG_MAX</span>     <span class="w">1</span><span class="c">6</span>
<span class="c">#define</span> <span class="c">PROMVADDR_MAX</span>   <span class="w">1</span><span class="pc">6</span>
<span class="c">#define</span> <span class="w">P</span><span class="pc">ROMI</span><span class="c">NTR_MAX</span>    <span class="w">15</span>
<span class="c">#</span><span class="pc">e</span><span class="c">ndif</span>

<span class="pc">str</span><span class="c">uct</span> <span class="w">linux_prom_registers</span> <span class="c">{</span>
	<span class="pc">u</span><span class="c">nsigned</span> <span class="c">int</span> <span class="w">which_io</span><span class="c">;</span>	
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">phys_addr</span><span class="c">;</span>	
	<span class="pc">u</span><span class="c">nsigned</span> <span class="c">int</span> <span class="w">reg_size</span><span class="c">;</span>	
<span class="c">};</span>

<span class="pc">s</span><span class="c">truct</span> <span class="w">linux_prom64_registers</span> <span class="c">{</span>
	<span class="c">unsigned</span> <span class="pc">l</span><span class="c">ong</span> <span class="w">p</span><span class="pc">h</span><span class="c">ys_addr;</span>
	<span class="c">unsigned</span> <span class="pc">l</span><span class="c">ong</span> <span class="w">r</span><span class="c">eg_size;</span>
<span class="pc">}</span><span class="c">;</span>

<span class="pc">s</span><span class="c">truct</span> <span class="w">linux_prom_irqs</span> <span class="c">{</span>
	<span class="pc">i</span><span class="c">nt</span> <span class="w">pri</span><span class="c">;</span>    
	<span class="c">int</span> <span class="w">ve</span><span class="pc">c</span><span class="c">tor;</span> 
<span class="c">};</span>


<span class="pc">s</span><span class="c">truct</span> <span class="w">linux_prom_ranges</span> <span class="c">{</span>
	<span class="pc">u</span><span class="c">nsigned</span> <span class="c">int</span> <span class="w">ot_child_space</span><span class="c">;</span>
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">ot_child_base</span><span class="c">;</span>		
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">ot_parent_space</span><span class="c">;</span>
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">ot_parent_base</span><span class="c">;</span>		
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">or_size</span><span class="c">;</span>
<span class="pc">}</span><span class="c">;</span>


<span class="c">#</span><span class="pc">i</span><span class="c">f</span> <span class="c">defined(</span><span class="w">__sparc__)</span><span class="pc"> &amp;</span><span class="c">&amp;</span> <span class="c">defined(</span><span class="w">__arch64__</span><span class="c">)</span>
<span class="w">s</span><span class="pc">tr</span><span class="c">uct</span> <span class="w">linux_prom_pci_registers</span> <span class="c">{</span>
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">phys_hi</span><span class="c">;</span>
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">phys_mid</span><span class="c">;</span>
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">phys_lo</span><span class="c">;</span>

	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">size_hi</span><span class="c">;</span>
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">size_lo</span><span class="c">;</span>
<span class="pc">}</span><span class="c">;</span>
<span class="c">#</span><span class="w">e</span><span class="pc">l</span><span class="c">se</span>
<span class="w">s</span><span class="pc">tr</span><span class="c">uct</span> <span class="w">l</span><span class="c">inux_prom_pci_registers</span> <span class="pc">{</span>
	
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">which_io</span><span class="c">;</span>  

	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">p</span><span class="pc">hys_h</span><span class="c">i;</span>
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">p</span><span class="pc">h</span><span class="c">ys_lo;</span>

	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">s</span><span class="pc">i</span><span class="c">ze_hi;</span>
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">s</span><span class="pc">i</span><span class="c">ze_lo;</span>
<span class="pc">}</span><span class="c">;</span>

<span class="pc">#e</span><span class="c">ndif</span>

<span class="w">s</span><span class="c">truct</span> <span class="w">linux_prom_pci_ranges</span> <span class="c">{</span>
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">child_phys_hi</span><span class="c">;</span>	
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">child_phys_mid</span><span class="c">;</span>
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">child_phys_lo</span><span class="c">;</span>

	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">parent_phys_hi</span><span class="c">;</span>
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">parent_phys_lo</span><span class="c">;</span>

	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">si</span><span class="pc">ze_h</span><span class="c">i;</span>
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">si</span><span class="pc">ze_l</span><span class="c">o;</span>
<span class="pc">}</span><span class="c">;</span>

<span class="pc">s</span><span class="c">truct</span> <span class="w">linux_prom_pci_intmap</span> <span class="c">{</span>
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">phys_hi</span><span class="c">;</span>
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">phys_mid</span><span class="c">;</span>
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">phys_lo</span><span class="c">;</span>

	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">inte</span><span class="pc">rr</span><span class="c">upt;</span>

	<span class="pc">i</span><span class="c">nt</span>          <span class="w">cnode</span><span class="c">;</span>
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">cinterrupt</span><span class="c">;</span>
<span class="pc">}</span><span class="c">;</span>

<span class="pc">s</span><span class="c">truct</span> <span class="w">linux_prom_pci_intmask</span> <span class="c">{</span>
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">p</span><span class="pc">hys_h</span><span class="c">i;</span>
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">p</span><span class="pc">h</span><span class="c">ys_mid;</span>
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">p</span><span class="pc">hys_l</span><span class="c">o;</span>
	<span class="c">unsigned</span> <span class="c">int</span> <span class="w">int</span><span class="pc">err</span><span class="c">upt;</span>
<span class="pc">}</span><span class="c">;</span>

<span class="c">#</span><span class="pc">e</span><span class="c">ndif</span> 

<span class="c">#</span><span class="w">e</span><span class="pc">n</span><span class="c">dif</span> 

</pre>
</body>
</html>

